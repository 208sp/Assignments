!pip install dnspython
!pip install pymongo[srv]

import pymongo 
from pymongo import MongoClient


client = pymongo.MongoClient("mongodb+srv://208s:ShivamPal12@cluster0.dqcic.mongodb.net/myFirstDatabase?retryWrites=true&w=majority")
db = client.DW4
records=db.Assignment2


class NewPerson:
  def __inti__(self):
    self.fname,self.sname=input("Enter your name: ").split()

    self.no='0'
    while len(self.no)!=10 and self.no[:].isnumeric():
      self.no=input("Enter Phone Number: ")

    self.gmail=NewPerson.ask_gmail()

  def ask_gmail():
    a=input("Enter Gmail: ")
    if a.endswith("@gmail.com") and a[:-10].isalnum():
      pass
    else:
      print("Invalid Gmail Id")
      NewPerson.ask_gmail()

    if records.find_one({'gmail':a}) is not None:
      print("Gmail Id Already in Database")
      NewPerson.ask_gmail()
    return a
    
a1= NewPerson()
records.insert_one(a1.__dict__)
